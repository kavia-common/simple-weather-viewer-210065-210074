{"is_source_file": true, "format": "JavaScript", "description": "This file provides utility functions for authentication, including session management, mock authentication logic, environment-based user configuration, and role-based access checks, intended for frontend use in a weather website project.", "external_files": [], "external_methods": ["process.env", "window.localStorage", "JSON.parse", "JSON.stringify", "Date.now", "Date.prototype.toISOString", "Date.parse"], "published": ["getAuthMode", "getConfiguredUsers", "createSession", "getSession", "clearSession", "isAuthorized", "authenticate"], "classes": [], "methods": [{"name": "uuidv4()", "description": "Generates a UUID v4 string, used for creating session tokens.", "scope": "", "scopeKind": ""}, {"name": "getAuthMode()", "description": "Returns the current authentication mode, either 'mock' or 'envUsers', based on environment variables.", "scope": "", "scopeKind": ""}, {"name": "getConfiguredUsers()", "description": "Parses and returns an array of user objects defined in environment variable REACT_APP_AUTH_USERS when in envUsers mode.", "scope": "", "scopeKind": ""}, {"name": "createSession(user, ttlMs = 2 * 60 * 60 * 1000)", "description": "Creates a session object for a user with a specified TTL and stores it in localStorage.", "scope": "", "scopeKind": ""}, {"name": "getSession()", "description": "Retrieves the current user session from localStorage if it is valid and not expired.", "scope": "", "scopeKind": ""}, {"name": "clearSession()", "description": "Removes the user session from localStorage.", "scope": "", "scopeKind": ""}, {"name": "isAuthorized(requiredRole, session = null)", "description": "Checks if the current or provided session authorizes a user with the required role ('user' or 'admin').", "scope": "", "scopeKind": ""}, {"name": "authenticate(credentials)", "description": "Performs mock or environment-based authentication based on credentials provided, returning success status and user info.", "scope": "", "scopeKind": ""}, {"name": "AnonymousFunctionb180a6250100(c)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["process.env.AUTH_MODE", "process.env.REACT_APP_AUTH_USERS", "window.localStorage.setItem", "window.localStorage.getItem", "window.localStorage.removeItem", "JSON.parse", "JSON.stringify", "Date.now", "new Date()", "Date.parse", "uuidv4"], "search-terms": ["auth", "session", "mock authentication", "localStorage", "UUID", "environment variables", "login", "role-based access", "user configuration"], "state": 2, "file_id": 35, "knowledge_revision": 78, "git_revision": "", "ctags": [{"_type": "tag", "name": "AnonymousFunctionb180a6250100", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(\\/[xy]\\/g, function (c) {$/", "language": "JavaScript", "kind": "function", "signature": "(c)"}, {"_type": "tag", "name": "SESSION_KEY", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^const SESSION_KEY = \"app_session\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "authenticate", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^export async function authenticate(credentials) {$/", "language": "JavaScript", "kind": "function", "signature": "(credentials)"}, {"_type": "tag", "name": "clearSession", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^export function clearSession() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "createSession", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^export function createSession(user, ttlMs = 2 * 60 * 60 * 1000) {$/", "language": "JavaScript", "kind": "function", "signature": "(user, ttlMs = 2 * 60 * 60 * 1000)"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^      email: match.email || undefined,$/", "language": "JavaScript", "kind": "property", "scope": "authenticate.user", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^    email: emailOrUsername.includes(\"@\") ? emailOrUsername : undefined,$/", "language": "JavaScript", "kind": "property", "scope": "authenticate.user", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^    email: user.email || null,$/", "language": "JavaScript", "kind": "property", "scope": "createSession.session", "scopeKind": "class"}, {"_type": "tag", "name": "expiry", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^    expiry: new Date(now + ttlMs).toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "createSession.session", "scopeKind": "class"}, {"_type": "tag", "name": "getAuthMode", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^export function getAuthMode() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getConfiguredUsers", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^export function getConfiguredUsers() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getSession", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^export function getSession() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^      id: match.id || (match.email || match.username),$/", "language": "JavaScript", "kind": "property", "scope": "authenticate.user", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^    id: emailOrUsername,$/", "language": "JavaScript", "kind": "property", "scope": "authenticate.user", "scopeKind": "class"}, {"_type": "tag", "name": "isAuthorized", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^export function isAuthorized(requiredRole, session = null) {$/", "language": "JavaScript", "kind": "function", "signature": "(requiredRole, session = null)"}, {"_type": "tag", "name": "issuedAt", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^    issuedAt: new Date(now).toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "createSession.session", "scopeKind": "class"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^      role: match.role || \"user\",$/", "language": "JavaScript", "kind": "property", "scope": "authenticate.user", "scopeKind": "class"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^    role: emailOrUsername.toLowerCase().startsWith(\"admin\") ? \"admin\" : \"user\",$/", "language": "JavaScript", "kind": "property", "scope": "authenticate.user", "scopeKind": "class"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^    role: user.role || \"user\",$/", "language": "JavaScript", "kind": "property", "scope": "createSession.session", "scopeKind": "class"}, {"_type": "tag", "name": "session", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^  const session = {$/", "language": "JavaScript", "kind": "class", "scope": "createSession", "scopeKind": "class"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^    token: uuidv4(),$/", "language": "JavaScript", "kind": "property", "scope": "createSession.session", "scopeKind": "class"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^    const user = {$/", "language": "JavaScript", "kind": "class", "scope": "authenticate", "scopeKind": "class"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^  const user = {$/", "language": "JavaScript", "kind": "class", "scope": "authenticate", "scopeKind": "class"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^    userId: user.id,$/", "language": "JavaScript", "kind": "property", "scope": "createSession.session", "scopeKind": "class"}, {"_type": "tag", "name": "username", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^      username: match.username || undefined,$/", "language": "JavaScript", "kind": "property", "scope": "authenticate.user", "scopeKind": "class"}, {"_type": "tag", "name": "username", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^    username: !emailOrUsername.includes(\"@\") ? emailOrUsername : undefined,$/", "language": "JavaScript", "kind": "property", "scope": "authenticate.user", "scopeKind": "class"}, {"_type": "tag", "name": "username", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^    username: user.username || null,$/", "language": "JavaScript", "kind": "property", "scope": "createSession.session", "scopeKind": "class"}, {"_type": "tag", "name": "uuidv4", "path": "/home/kavia/workspace/code-generation/simple-weather-viewer-210065-210074/weather_app_frontend/src/utils/auth.js", "pattern": "/^function uuidv4() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}], "hash": "e1597f64bd918cd70ad8476f5ba3f620", "format-version": 4, "code-base-name": "weather_app_frontend", "filename": "weather_app_frontend/src/utils/auth.js", "fields": [{"name": "email: match.email || undefined,", "scope": "authenticate.user", "scopeKind": "class", "description": "unavailable"}, {"name": "email: emailOrUsername.includes(\"@\") ? emailOrUsername : undefined,", "scope": "authenticate.user", "scopeKind": "class", "description": "unavailable"}, {"name": "email: user.email || null,", "scope": "createSession.session", "scopeKind": "class", "description": "unavailable"}, {"name": "expiry: new Date(now + ttlMs).toISOString(),", "scope": "createSession.session", "scopeKind": "class", "description": "unavailable"}, {"name": "id: match.id || (match.email || match.username),", "scope": "authenticate.user", "scopeKind": "class", "description": "unavailable"}, {"name": "id: emailOrUsername,", "scope": "authenticate.user", "scopeKind": "class", "description": "unavailable"}, {"name": "issuedAt: new Date(now).toISOString(),", "scope": "createSession.session", "scopeKind": "class", "description": "unavailable"}, {"name": "role: match.role || \"user\",", "scope": "authenticate.user", "scopeKind": "class", "description": "unavailable"}, {"name": "role: emailOrUsername.toLowerCase().startsWith(\"admin\") ? \"admin\" : \"user\",", "scope": "authenticate.user", "scopeKind": "class", "description": "unavailable"}, {"name": "role: user.role || \"user\",", "scope": "createSession.session", "scopeKind": "class", "description": "unavailable"}, {"name": "token: uuidv4(),", "scope": "createSession.session", "scopeKind": "class", "description": "unavailable"}, {"name": "userId: user.id,", "scope": "createSession.session", "scopeKind": "class", "description": "unavailable"}, {"name": "username: match.username || undefined,", "scope": "authenticate.user", "scopeKind": "class", "description": "unavailable"}, {"name": "username: !emailOrUsername.includes(\"@\") ? emailOrUsername : undefined,", "scope": "authenticate.user", "scopeKind": "class", "description": "unavailable"}, {"name": "username: user.username || null,", "scope": "createSession.session", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"78": ""}]}